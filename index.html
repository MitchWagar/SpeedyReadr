// Tutorial functionality
const tutorialPopup = document.getElementById('tutorial-popup');
const tutorialOverlay = document.getElementById('tutorial-overlay');
const tutorialSteps = [
    document.getElementById('tutorial-step-1'),
    document.getElementById('tutorial-step-2'),
    document.getElementById('tutorial-step-3'),
    document.getElementById('tutorial-step-4'),
    document.getElementById('tutorial-step-5'),
    document.getElementById('tutorial-step-6')
];
let currentStep = 0;

// Show the first step
tutorialSteps[currentStep].style.display = 'block';

// Timer for the first step
const timerText = document.getElementById('timer-text');
const nextButton = document.getElementById('tutorial-next');
let timeLeft = 5;

// Start the countdown
const countdown = setInterval(() => {
    timeLeft--;
    timerText.textContent = `Please wait ${timeLeft} seconds to continue...`;

    if (timeLeft <= 0) {
        clearInterval(countdown);
        timerText.textContent = "You can now continue.";
        nextButton.disabled = false;
        nextButton.style.backgroundColor = '#007bff';
        nextButton.style.cursor = 'pointer';
    }
}, 1000);

// Function to move to the next step
function goToNextStep() {
    tutorialSteps[currentStep].style.display = 'none';
    currentStep++;
    if (currentStep < tutorialSteps.length) {
        tutorialSteps[currentStep].style.display = 'block';
    } else {
        tutorialPopup.style.display = 'none';
        tutorialOverlay.style.display = 'none';
    }
}

// Add event listeners for all "Next" buttons
for (let i = 0; i < tutorialSteps.length - 1; i++) {
    const nextButton = tutorialSteps[i].querySelector('button[id^="tutorial-next"]');
    if (nextButton) {
        nextButton.addEventListener('click', goToNextStep);
    }
}

// Event listener for the "Skip Tutorial" button
for (let i = 0; i < tutorialSteps.length - 1; i++) {
    const skipButton = tutorialSteps[i].querySelector('button[id^="tutorial-skip"]');
    if (skipButton) {
        skipButton.addEventListener('click', () => {
            tutorialPopup.style.display = 'none';
            tutorialOverlay.style.display = 'none';
        });
    }
}

// Event listener for the "Close" button
document.getElementById('tutorial-close').addEventListener('click', () => {
    tutorialPopup.style.display = 'none';
    tutorialOverlay.style.display = 'none';
});
